
# Settings for Backend (on Cloud Run).
# See https://firebase.google.com/docs/app-hosting/configure#cloud-run
runConfig:
  minInstances: 0
  # maxInstances: 100
  # concurrency: 80
  # cpu: 1
  # memoryMiB: 512

# Environment variables and secrets.
env:
  # --- Required for AI Features ---
  # INSTRUCTION: Create a secret named 'gemini-api-key' in Google Secret Manager with your Gemini API key value.
  - variable: GEMINI_API_KEY
    secret: Gemini-API-Key
    availability:
      - RUNTIME

  # --- Required for Shopify Integration ---
  # INSTRUCTION: Create a secret named 'shopify-api-key' with your Shopify App's API Key (Client ID).
  - variable: SHOPIFY_API_KEY
    secret: shopify-cs-app-api
    availability:
      - RUNTIME
  # INSTRUCTION: Create a secret named 'shopify-api-secret-key' with your Shopify App's API Secret Key.
  - variable: SHOPIFY_API_SECRET_KEY
    secret: shopify-cs-secret-api
    availability:
      - RUNTIME
  - variable: SHOPIFY_APP_SCOPES
    value: "read_products,write_products,read_themes,write_themes"
    availability:
      - RUNTIME
  # INSTRUCTION: The value below must match your app's public URL.
  - variable: NEXT_PUBLIC_APP_URL
    value: "https://customizer-studio.fly.dev"
    availability:
      - RUNTIME

  # --- Required for Stripe Integration ---
  # INSTRUCTION: Create secrets for your Stripe keys in Google Secret Manager.
  - variable: STRIPE_SECRET_KEY
    secret: cs-seckey
    availability:
      - RUNTIME
  # INSTRUCTION: Create a secret for your Stripe webhook signing secret.
  - variable: STRIPE_WEBHOOK_SECRET
    secret: cs-str-webhook
    availability:
      - RUNTIME

  # --- Optional for Password Protection ---
  # - variable: APP_ACCESS_PASSWORD
  #   secret: APP_ACCESS_PASSWORD
  #   availability:
  #     - RUNTIME
  # - variable: APP_ACCESS_COOKIE_VALUE
  #   secret: APP_ACCESS_COOKIE_VALUE
  #   availability:
  #     - RUNTIME
